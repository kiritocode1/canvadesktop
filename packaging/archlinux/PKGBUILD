# Maintainer: vikdevelop <super-vik1@protonmail.com>

pkgname=canvadesktop
_appid="com.github.vikdevelop.canvadesktop"
pkgver=1.0
pkgrel=1
pkgdesc="Canva desktop app (electron wrapper)"
arch=('any')
url="https://github.com/vikdevelop/$pkgname"
license=('MIT')
depends=('npm')
source=("git+https://github.com/vikdevelop/canvadesktop")
sha256sums=('SKIP')

prepare() {
	cd "$pkgname"
  echo "cd /usr/share/canvadesktop && npm start" > canvadesktop.sh
  chmod +x canvadesktop.sh
}

build() {
  cd "$pkgname"
  npm install
}

package() {
	cd "$pkgname"
  install -D "canvadesktop.sh" -t "$pkgdir/usr/bin"
  install -D "package.json" -t "$pkgdir/usr/share/$pkgname"
  install -D "package-lock.json" -t "$pkgdir/usr/share/$pkgname"
  cp -R "src" "$pkgdir/usr/share/$pkgname/src"
  cp -R "icon" "$pkgdir/usr/share/$pkgname/icon"
  cp -R "node_modules" "$pkgdir/usr/share/$pkgname/node_modules"
  install -Dm644 "icon/canva.ico" "$pkgdir/usr/share/icons/hicolor/128x128/apps/canva.png"
  install -D "packaging/canva.desktop" -t "$pkgdir/usr/share/applications"
  install -D "LICENSE" -t "$pkgidr/usr/share/licenses/$pkgname"
}
